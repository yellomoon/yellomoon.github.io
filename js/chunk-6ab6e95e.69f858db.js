(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ab6e95e"],{"156c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 跑单管理\n            ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"机构"},model:{value:e.query.mechanism,callback:function(t){e.$set(e.query,"mechanism",t)},expression:"query.mechanism"}},[a("el-option",{key:"0",attrs:{label:"okex",value:"0"}}),a("el-option",{key:"1",attrs:{label:"huobi",value:"1"}}),a("el-option",{key:"2",attrs:{label:"biance",value:"2"}})],1),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"机器人名称"},model:{value:e.query.bot_id,callback:function(t){e.$set(e.query,"bot_id",t)},expression:"query.bot_id"}},e._l(e.botlist,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"矿机指标选择"},model:{value:e.query.worker_id,callback:function(t){e.$set(e.query,"worker_id",t)},expression:"query.worker_id"}},e._l(e.platparms.workerinfo,(function(e){return a("el-option",{key:e.worker_id+"_"+e.worker_type,attrs:{label:e.worker_name+"---  "+e.worker_cu_name+"---  "+e.worker_cu_rate+"%",value:e.worker_id+"_"+e.worker_type}})})),1),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"交易对"},model:{value:e.query.symbol,callback:function(t){e.$set(e.query,"symbol",t)},expression:"query.symbol"}},e._l(e.symbol,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"状态"},model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}},[a("el-option",{key:"-1",attrs:{label:"停止",value:"-1"}}),a("el-option",{key:"0",attrs:{label:"等待开仓",value:"0"}}),a("el-option",{key:"1",attrs:{label:"等待平仓",value:"1"}}),a("el-option",{key:"2",attrs:{label:"订单完成",value:"2"}}),a("el-option",{key:"3",attrs:{label:"开仓同步订单中",value:"3"}}),a("el-option",{key:"4",attrs:{label:"平仓同步订单中",value:"4"}})],1),a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["12:00:00"]},model:{value:e.query.searchdata,callback:function(t){e.$set(e.query,"searchdata",t)},expression:"query.searchdata"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"id",label:"序号",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"runbot.name",label:"机器人名称"}}),a("el-table-column",{attrs:{prop:"worker_id",label:"矿机指标选择"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.workerinfo[t.row.runbot.worker_id[0].toString()+"_"+t.row.runbot.worker_id[1].toString()]))])]}}])}),a("el-table-column",{attrs:{prop:"mechanism",label:"机构"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.mechanism?a("div",[e._v("okex")]):e._e(),1==t.row.mechanism?a("div",[e._v("huobi")]):e._e(),2==t.row.mechanism?a("div",[e._v("binance")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"symbol",label:"交易对"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1==t.row.status?a("div",[e._v("停止")]):e._e(),0==t.row.status?a("div",[e._v("等待开仓")]):e._e(),1==t.row.status?a("div",[e._v("等待平仓")]):e._e(),2==t.row.status?a("div",[e._v("订单完成")]):e._e(),3==t.row.status?a("div",[e._v("开仓同步订单中")]):e._e(),4==t.row.status?a("div",[e._v("平仓同步订单中")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"transaction_num",label:"交易币量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.transaction_num+t.row.transaction_currency))])]}}])}),a("el-table-column",{attrs:{prop:"denominated_num",label:"计价币量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.denominated_num+t.row.denominated_currency))])]}}])}),a("el-table-column",{attrs:{prop:"denominated_profit",label:"利润"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.runbot.profit_type?a("div",[e._v(e._s(t.row.denominated_profit+t.row.denominated_currency))]):e._e(),1==t.row.runbot.profit_type?a("div",[e._v(e._s(t.row.transaction_profit+t.row.transaction_currency))]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"error_log",label:"错误"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1==t.row.status?a("div",[e._v(e._s(t.row.error_log))]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("详情")]),-1==t.row.status?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handlestart(t.$index,t.row)}}},[e._v("启动")]):e._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑","before-close":e.handleDialogClose,visible:e.editVisible,width:"80%"},on:{"update:visible":function(t){e.editVisible=t},close:e.closeDialog}},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.orderdetailtable,border:"","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"id",label:"序号",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"all_num",label:"委托数量"}}),a("el-table-column",{attrs:{prop:"success_num",label:"成交数量"}}),a("el-table-column",{attrs:{prop:"price_avg",label:"均价"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1==t.row.status?a("div",[e._v("停止")]):e._e(),0==t.row.status?a("div",[e._v("新建订单")]):e._e(),1==t.row.status?a("div",[e._v("开仓"+e._s("--"+["买","卖"][t.row.buy_sell]))]):e._e(),2==t.row.status?a("div",[e._v("平仓"+e._s("--"+["买","卖"][t.row.buy_sell]))]):e._e(),3==t.row.status?a("div",[e._v("开仓同步订单中")]):e._e(),4==t.row.status?a("div",[e._v("平仓同步订单中")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"field_fees",label:"手续费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.field_fees+t.row.field_fees_currency))])]}}])}),a("el-table-column",{attrs:{prop:"denominated_num",label:" 计价货币"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.denominated_num+t.row.denominated_currency))])]}}])}),a("el-table-column",{attrs:{prop:"transaction_num",label:"交易货币"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.transaction_num+t.row.transaction_currency))])]}}])}),a("el-table-column",{attrs:{prop:"updated_at",label:"时间"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleDialogClose}},[e._v("确 定")])],1)],1)],1)},o=[],l=a("3f55"),n={name:"basetable",data:function(){return{query:{status:this.$route.query.status,worker_id:this.$route.query.worker_id},tableData:[],multipleSelection:[],delList:[],editVisible:!1,createVisible:!1,pageTotal:0,form:{},newform:{},idx:-1,id:-1,myHeaders:{},fileList:[],imgurl:"",httpurl:"",editimgurl:"",btnChangeEnable:!1,orderdetailtable:[],symbol:[],botlist:[],workerinfo:[]}},created:function(){this.httpurl=l["b"]+"/admin-api/savetmppic";var e=localStorage.getItem("admin_access_token");this.myHeaders={Authorization:"Bearer "+e},this.getplatData()},mounted:function(){this.getData()},watch:{query:{handler:function(e,t,a){console.log(a)},deep:!0},$route:function(e,t){"/runorder"==e.path&&e.fullPath!=t.fullPath&&(this.query.worker_id=this.$route.query.worker_id,this.getData())}},methods:{getplatData:function(){var e=this,t=this;this.$axios.get("runbot/platparms",this.query).then((function(a){if(null!=a.data.data){e.platparms=a.data.data;for(var r=0;r<t.platparms.workerinfo.length;r++)t.workerinfo[t.platparms.workerinfo[r].worker_id+"_"+t.platparms.workerinfo[r].worker_type]=t.platparms.workerinfo[r].worker_name+t.platparms.workerinfo[r].worker_cu_name;t.getData()}}))},handleChange:function(e,t){"ready"==e.status?this.btnChangeEnable=!0:"success"==e.status&&(this.btnChangeEnable=!1)},closeDialog:function(){this.getData()},handleDialogClose:function(){return this.editVisible=!1,!1},handleAvatarSuccess:function(e,t,a){},handleAvataredit:function(e,t,a){},handleRemove:function(e,t){},handleRemoveedit:function(e,t){},handlePreview:function(e){console.log(e)},getData:function(){var e=this;this.$axios.post("runorder",this.query).then((function(t){if(null!=t.data.data){e.pageTotal=t.data.data.pageTotal||10;for(var a=0;a<t.data.data.list.length;a++)t.data.data.list[a].worker_service_rate=100*t.data.data.list[a].worker_service_rate;e.tableData=t.data.data.list,e.symbol=t.data.data.basedata.symbol,e.botlist=t.data.data.basedata.runbot}}))},handleSearch:function(){this.$set(this.query,"page",0),this.getData()},handlestart:function(e,t){var a=this;this.$confirm("确定重启吗？","提示",{type:"warning"}).then((function(){a.$axios.post("restartrunorder/"+a.tableData[e].id,a.tableData[e]).then((function(e){null!=e.data&&0==e.data.success?(a.$message.success("重启成功"),a.getData()):a.$message.error(e.data.msg)}))})).catch((function(){}))},handleSelectionChange:function(e){this.multipleSelection=e},handleEdit:function(e,t){var a=this;this.$axios.get("runorderdetail/"+t.id).then((function(e){null!=e.data.data&&(a.pageTotal=e.data.data.pageTotal||10,a.orderdetailtable=e.data.data.list,a.editVisible=!0)}))},handlecreate:function(){this.createVisible=!0,this.newform={},this.$refs.creatimg.clearFiles()},saveEdit:function(){this.editVisible=!1},createnew:function(){var e=this;if(console.log(this.newform),"undefined"!=typeof this.newform.worker_name&&"undefined"!=typeof this.newform.computing_power&&"undefined"!=typeof this.newform.hash_consumption&&"undefined"!=typeof this.newform.worker_lives&&"undefined"!=typeof this.newform.worker_price&&"undefined"!=typeof this.newform.worker_service_rate&&"undefined"!=typeof this.newform.complex_electricity&&"undefined"!=typeof this.newform.pure_electricity&&""!=this.newform.worker_name&&""!=this.newform.computing_power&&""!=this.newform.hash_consumption&&""!=this.newform.worker_lives&&""!=this.newform.worker_price&&""!=this.newform.worker_service_rate&&""!=this.newform.complex_electricity&&""!=this.newform.pure_electricity){var t=this;this.$axios.post("neworker",this.newform).then((function(t){e.createVisible=!1,e.$message.success("新建成功"),e.newform={},e.getData()})).catch((function(e){t.$message.error("仔细检查，输入数据错误")}))}else this.$message.error("请填写完整表单")},handlePageChange:function(e){this.$set(this.query,"page",e),this.getData()}}},s=n,i=(a("c129"),a("2877")),u=Object(i["a"])(s,r,o,!1,null,"41b2f494",null);t["default"]=u.exports},"61cc":function(e,t,a){},c129:function(e,t,a){"use strict";var r=a("61cc"),o=a.n(r);o.a}}]);